!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.client=e():t.client=e()}(this,function(){return function(t){function e(n){if(o[n])return o[n].exports;var i=o[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var o={};return e.m=t,e.c=o,e.p="",e(0)}([function(t,e,o){"use strict";function n(t){for(var o in t)e.hasOwnProperty(o)||(e[o]=t[o])}var i=o(1);n(o(1));var r=function(){function t(){this.handle=new i.TypedWebSocketMessageHandle,this.ws=null}return t.prototype.bindHandle=function(t){var e=this;null!=t&&(this.ws=t,this.ws.onmessage=function(t){var o=JSON.parse(t.data),n=i.GenerateMessage(o);null!=n&&e.handle.emit(i.GenerateMessage(o))})},t.prototype.send=function(t){null!=this.ws&&null!=t&&this.ws.send(JSON.stringify(t.buffer))},t}();e.Client=r},function(t,e){"use strict";function o(t){if(null!=t&&null!=e.MessageMap[t[0]]){var o=new e.MessageMap[t[0]];if(o.buffer.length===t.length)return o.buffer=t,o}return null}var n=this&&this.__extends||function(t,e){function o(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)},i=function(){function t(){}return t.prototype.getId=function(){return null!=this.buffer&&this.buffer.length>0?this.buffer[0]:-1},t}();e.Message=i,e.MessageMap={},e.GenerateMessage=o;var r=function(){function t(){this.eventInvokerMap={}}return t.prototype.emit=function(t){if(null!=t)for(var e=0,o=this.getInvokerList(t.getId());e<o.length;e++){var n=o[e];n.handler.call(n.target,t)}},t.prototype.getInvokerList=function(t){return this.eventInvokerMap[t]||[]},t.prototype.on=function(t,e,o){if(void 0===o&&(o=e[t]),null==o)throw"Client.on event: "+t+", handle is null";null==this.eventInvokerMap[t]&&(this.eventInvokerMap[t]=[]),null!=e&&this.eventInvokerMap[t].push({target:e,handler:o})},t.prototype.off=function(t,e,o){void 0===o&&(o=e[t]),null!=this.eventInvokerMap[t]&&(this.eventInvokerMap[t]=this.eventInvokerMap[t].filter(function(t,n,i){return e!==t.target||o!==t.handler}))},t}();e.WebSocketMessageHandle=r;var f;!function(t){t[t.LoginReq=0]="LoginReq",t[t.LoginRsp=1]="LoginRsp",t[t.MatchingReq=2]="MatchingReq",t[t.MatchingTimeoutNotice=3]="MatchingTimeoutNotice",t[t.MatchingSuccessNotice=4]="MatchingSuccessNotice",t[t.StopMatchingReq=5]="StopMatchingReq",t[t.StopMatchingRsp=6]="StopMatchingRsp",t[t.UserIsReadyReq=7]="UserIsReadyReq",t[t.RoomReadyNotice=8]="RoomReadyNotice",t[t.SetRoomUserDataReq=9]="SetRoomUserDataReq",t[t.SetRoomUserDataNotice=10]="SetRoomUserDataNotice",t[t.FrameNotice=11]="FrameNotice",t[t.GetFormationReq=12]="GetFormationReq",t[t.GetFormationRsp=13]="GetFormationRsp",t[t.SetFormationReq=14]="SetFormationReq",t[t.SetFormationRsp=15]="SetFormationRsp"}(f=e.MessageId||(e.MessageId={}));var a=function(t){function e(){return t.apply(this,arguments)||this}return n(e,t),e.prototype.onLoginReq=function(t,e){this.on(f.LoginReq,t,e)},e.prototype.offLoginReq=function(t,e){this.off(f.LoginReq,t,e)},e.prototype.onLoginRsp=function(t,e){this.on(f.LoginRsp,t,e)},e.prototype.offLoginRsp=function(t,e){this.off(f.LoginRsp,t,e)},e.prototype.onMatchingReq=function(t,e){this.on(f.MatchingReq,t,e)},e.prototype.offMatchingReq=function(t,e){this.off(f.MatchingReq,t,e)},e.prototype.onMatchingTimeoutNotice=function(t,e){this.on(f.MatchingTimeoutNotice,t,e)},e.prototype.offMatchingTimeoutNotice=function(t,e){this.off(f.MatchingTimeoutNotice,t,e)},e.prototype.onMatchingSuccessNotice=function(t,e){this.on(f.MatchingSuccessNotice,t,e)},e.prototype.offMatchingSuccessNotice=function(t,e){this.off(f.MatchingSuccessNotice,t,e)},e.prototype.onStopMatchingReq=function(t,e){this.on(f.StopMatchingReq,t,e)},e.prototype.offStopMatchingReq=function(t,e){this.off(f.StopMatchingReq,t,e)},e.prototype.onStopMatchingRsp=function(t,e){this.on(f.StopMatchingRsp,t,e)},e.prototype.offStopMatchingRsp=function(t,e){this.off(f.StopMatchingRsp,t,e)},e.prototype.onUserIsReadyReq=function(t,e){this.on(f.UserIsReadyReq,t,e)},e.prototype.offUserIsReadyReq=function(t,e){this.off(f.UserIsReadyReq,t,e)},e.prototype.onRoomReadyNotice=function(t,e){this.on(f.RoomReadyNotice,t,e)},e.prototype.offRoomReadyNotice=function(t,e){this.off(f.RoomReadyNotice,t,e)},e.prototype.onSetRoomUserDataReq=function(t,e){this.on(f.SetRoomUserDataReq,t,e)},e.prototype.offSetRoomUserDataReq=function(t,e){this.off(f.SetRoomUserDataReq,t,e)},e.prototype.onSetRoomUserDataNotice=function(t,e){this.on(f.SetRoomUserDataNotice,t,e)},e.prototype.offSetRoomUserDataNotice=function(t,e){this.off(f.SetRoomUserDataNotice,t,e)},e.prototype.onFrameNotice=function(t,e){this.on(f.FrameNotice,t,e)},e.prototype.offFrameNotice=function(t,e){this.off(f.FrameNotice,t,e)},e.prototype.onGetFormationReq=function(t,e){this.on(f.GetFormationReq,t,e)},e.prototype.offGetFormationReq=function(t,e){this.off(f.GetFormationReq,t,e)},e.prototype.onGetFormationRsp=function(t,e){this.on(f.GetFormationRsp,t,e)},e.prototype.offGetFormationRsp=function(t,e){this.off(f.GetFormationRsp,t,e)},e.prototype.onSetFormationReq=function(t,e){this.on(f.SetFormationReq,t,e)},e.prototype.offSetFormationReq=function(t,e){this.off(f.SetFormationReq,t,e)},e.prototype.onSetFormationRsp=function(t,e){this.on(f.SetFormationRsp,t,e)},e.prototype.offSetFormationRsp=function(t,e){this.off(f.SetFormationRsp,t,e)},e}(r);e.TypedWebSocketMessageHandle=a;var s=function(t){function e(){var e=t.apply(this,arguments)||this;return e.buffer=[f.LoginReq,"","test"],e}return n(e,t),e.prototype.LoginReq=function(){},Object.defineProperty(e.prototype,"account",{get:function(){return this.buffer[1]},set:function(t){this.buffer[1]=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"platform",{get:function(){return this.buffer[2]},set:function(t){this.buffer[2]=t},enumerable:!0,configurable:!0}),e}(i);e.LoginReq=s,e.MessageMap[f.LoginReq]=s;var u=function(t){function e(){var e=t.apply(this,arguments)||this;return e.buffer=[f.LoginRsp,!0,""],e}return n(e,t),e.prototype.LoginRsp=function(){},Object.defineProperty(e.prototype,"isLogin",{get:function(){return this.buffer[1]},set:function(t){this.buffer[1]=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"error",{get:function(){return this.buffer[2]},set:function(t){this.buffer[2]=t},enumerable:!0,configurable:!0}),e}(i);e.LoginRsp=u,e.MessageMap[f.LoginRsp]=u;var c=function(t){function e(){var e=t.apply(this,arguments)||this;return e.buffer=[f.MatchingReq],e}return n(e,t),e.prototype.MatchingReq=function(){},e}(i);e.MatchingReq=c,e.MessageMap[f.MatchingReq]=c;var p=function(t){function e(){var e=t.apply(this,arguments)||this;return e.buffer=[f.MatchingTimeoutNotice],e}return n(e,t),e.prototype.MatchingTimeoutNotice=function(){},e}(i);e.MatchingTimeoutNotice=p,e.MessageMap[f.MatchingTimeoutNotice]=p;var h=function(t){function e(){var e=t.apply(this,arguments)||this;return e.buffer=[f.MatchingSuccessNotice,"",0,[""],[[0]]],e}return n(e,t),e.prototype.MatchingSuccessNotice=function(){},Object.defineProperty(e.prototype,"selfAccount",{get:function(){return this.buffer[1]},set:function(t){this.buffer[1]=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"userIndex",{get:function(){return this.buffer[2]},set:function(t){this.buffer[2]=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"accountList",{get:function(){return this.buffer[3]},set:function(t){this.buffer[3]=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formationList",{get:function(){return this.buffer[4]},set:function(t){this.buffer[4]=t},enumerable:!0,configurable:!0}),e}(i);e.MatchingSuccessNotice=h,e.MessageMap[f.MatchingSuccessNotice]=h;var R=function(t){function e(){var e=t.apply(this,arguments)||this;return e.buffer=[f.StopMatchingReq],e}return n(e,t),e.prototype.StopMatchingReq=function(){},e}(i);e.StopMatchingReq=R,e.MessageMap[f.StopMatchingReq]=R;var g=function(t){function e(){var e=t.apply(this,arguments)||this;return e.buffer=[f.StopMatchingRsp],e}return n(e,t),e.prototype.StopMatchingRsp=function(){},e}(i);e.StopMatchingRsp=g,e.MessageMap[f.StopMatchingRsp]=g;var y=function(t){function e(){var e=t.apply(this,arguments)||this;return e.buffer=[f.UserIsReadyReq],e}return n(e,t),e.prototype.UserIsReadyReq=function(){},e}(i);e.UserIsReadyReq=y,e.MessageMap[f.UserIsReadyReq]=y;var m=function(t){function e(){var e=t.apply(this,arguments)||this;return e.buffer=[f.RoomReadyNotice],e}return n(e,t),e.prototype.RoomReadyNotice=function(){},e}(i);e.RoomReadyNotice=m,e.MessageMap[f.RoomReadyNotice]=m;var l=function(t){function e(){var e=t.apply(this,arguments)||this;return e.buffer=[f.SetRoomUserDataReq,{}],e}return n(e,t),e.prototype.SetRoomUserDataReq=function(){},Object.defineProperty(e.prototype,"data",{get:function(){return this.buffer[1]},set:function(t){this.buffer[1]=t},enumerable:!0,configurable:!0}),e}(i);e.SetRoomUserDataReq=l,e.MessageMap[f.SetRoomUserDataReq]=l;var b=function(t){function e(){var e=t.apply(this,arguments)||this;return e.buffer=[f.SetRoomUserDataNotice,0,{}],e}return n(e,t),e.prototype.SetRoomUserDataNotice=function(){},Object.defineProperty(e.prototype,"userIndex",{get:function(){return this.buffer[1]},set:function(t){this.buffer[1]=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this.buffer[2]},set:function(t){this.buffer[2]=t},enumerable:!0,configurable:!0}),e}(i);e.SetRoomUserDataNotice=b,e.MessageMap[f.SetRoomUserDataNotice]=b;var M=function(t){function e(){var e=t.apply(this,arguments)||this;return e.buffer=[f.FrameNotice,50],e}return n(e,t),e.prototype.FrameNotice=function(){},Object.defineProperty(e.prototype,"ms",{get:function(){return this.buffer[1]},set:function(t){this.buffer[1]=t},enumerable:!0,configurable:!0}),e}(i);e.FrameNotice=M,e.MessageMap[f.FrameNotice]=M;var S=function(t){function e(){var e=t.apply(this,arguments)||this;return e.buffer=[f.GetFormationReq],e}return n(e,t),e.prototype.GetFormationReq=function(){},e}(i);e.GetFormationReq=S,e.MessageMap[f.GetFormationReq]=S;var d=function(t){function e(){var e=t.apply(this,arguments)||this;return e.buffer=[f.GetFormationRsp,[0]],e}return n(e,t),e.prototype.GetFormationRsp=function(){},Object.defineProperty(e.prototype,"formation",{get:function(){return this.buffer[1]},set:function(t){this.buffer[1]=t},enumerable:!0,configurable:!0}),e}(i);e.GetFormationRsp=d,e.MessageMap[f.GetFormationRsp]=d;var q=function(t){function e(){var e=t.apply(this,arguments)||this;return e.buffer=[f.SetFormationReq,[0]],e}return n(e,t),e.prototype.SetFormationReq=function(){},Object.defineProperty(e.prototype,"formation",{get:function(){return this.buffer[1]},set:function(t){this.buffer[1]=t},enumerable:!0,configurable:!0}),e}(i);e.SetFormationReq=q,e.MessageMap[f.SetFormationReq]=q;var v=function(t){function e(){var e=t.apply(this,arguments)||this;return e.buffer=[f.SetFormationRsp,[0]],e}return n(e,t),e.prototype.SetFormationRsp=function(){},Object.defineProperty(e.prototype,"formation",{get:function(){return this.buffer[1]},set:function(t){this.buffer[1]=t},enumerable:!0,configurable:!0}),e}(i);e.SetFormationRsp=v,e.MessageMap[f.SetFormationRsp]=v}])});